<div class="container">
    <h2>Book a time slot</h2>
    
    <div id="booking-container">
        <div class="form-group">
            <label for="bookingDate">Select Date:</label>
            <input type="date" id="bookingDate" name="bookingDate" required>
        </div>
        
        <div class="form-group">
            <label for="unitSelect">Select Unit:</label>
            <select id="unitSelect" name="unitSelect" required>
                <!-- Unit options will be populated by JavaScript -->
            </select>
        </div>
        
        <div id="loading" style="display: none;">
            Loading calendar...
        </div>
        
        <div id="calendar-container" style="display: none;">
            <div class="calendar-header">
                <h3>Click and drag to select your time range</h3>
                <div id="selected-range-display"></div>
            </div>
            
            <div id="day-calendar">
                <!-- Time slots will be populated here -->
            </div>
            
            <div class="booking-actions">
                <button id="confirm-booking" disabled>Book Selected Time</button>
                <button id="clear-selection">Clear Selection</button>
            </div>
        </div>
    </div>
</div>

<style>
#day-calendar {
    border: 1px solid #ddd;
    background: white;
    user-select: none;
    margin: 20px 0;
    max-height: 600px;
    overflow-y: auto;
}

.time-slot {
    height: 20px;
    display: flex;
    border-bottom: 1px solid #eee;
    cursor: pointer;
    position: relative;
}

.time-slot:hover {
    background-color: #f0f8ff;
}

.time-slot.selecting {
    background-color: #e6f3ff !important;
}

.time-slot.selected {
    background-color: #4a90e2 !important;
    color: white;
}

.time-label {
    width: 80px;
    padding: 2px 8px;
    font-size: 12px;
    border-right: 1px solid #eee;
    background: #f8f8f8;
    display: flex;
    align-items: center;
}

.density-bar {
    flex: 1;
    display: flex;
    align-items: center;
    padding: 2px 8px;
    position: relative;
}

.density-indicator {
    height: 8px;
    border-radius: 4px;
    margin-right: 8px;
    min-width: 20px;
}

.density-0 { background-color: #e8f5e8; }
.density-25 { background-color: #b3d9b3; }
.density-50 { background-color: #80c080; }
.density-75 { background-color: #4da64d; }
.density-100 { background-color: #2d7d2d; }

.density-text {
    font-size: 11px;
    color: #666;
}

.calendar-header {
    text-align: center;
    margin-bottom: 10px;
}

#selected-range-display {
    font-weight: bold;
    color: #4a90e2;
    margin-top: 5px;
    min-height: 20px;
}

.booking-actions {
    text-align: center;
    margin-top: 20px;
}

.booking-actions button {
    margin: 0 10px;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

#confirm-booking {
    background-color: #4a90e2;
    color: white;
}

#confirm-booking:disabled {
    background-color: #ccc;
    cursor: not-allowed;
}

#clear-selection {
    background-color: #f5f5f5;
    border: 1px solid #ddd;
}
</style>

<script src="/public/js/booking.js"></script>
